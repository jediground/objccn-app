var PHASOR_SUM=function(){function t(){f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0}function a(){f[0]=1,f[1]=0,f[2]=.5,f[3]=0,f[4]=.25}function r(){f[0]=1,f[1]=.5,f[2]=.4,f[3]=0,f[4]=0}function e(){f[0]=.5,f[1]=.7,f[2]=.3,f[3]=0,f[4]=0}function s(){A=0,H=0;for(var t=0;5>t;t++){var a=y(A),r=d(H);A+=Math.cos(P*(t+1))*f[t],H+=Math.sin(P*(t+1))*f[t],z=y(A),q=d(H),k[t].attr("x1",a).attr("y1",r).attr("x2",z).attr("y2",q),u[t].attr("cx",a).attr("cy",r).attr("r",y(f[t])-y(0))}var e=z;M.attr("x1",I(P)).attr("y1",q).attr("x2",e).attr("y2",q),b.attr("d",S(w)),m.attr("cx",I(P)).attr("cy",q),P+=.0125,P>6*Math.PI&&(P=0)}var i=300,n=300,o={top:0,right:0,bottom:0,left:0},l=i-o.left-o.right,c=n-o.top-o.bottom,y=d3.scale.linear().range([o.left,l]),d=d3.scale.linear().range([c,o.top]);y.domain([-2.5,2.5]),d.domain([-2.5,2.5]);var h=d3.select("#phasorSum2"),p=d3.svg.axis().scale(y).tickSize(0).ticks(0).tickSubdivide(!0),x=d3.svg.axis().scale(d).tickSize(0).ticks(0).orient("left").tickSubdivide(!0);h.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+c/2+")").style("opacity",.25).call(p),h.append("svg:g").attr("class","y axis").attr("transform","translate("+l/2+",0)").style("opacity",.25).call(x);var g=d3.scale.category10();g.domain[d3.range(0,10,1)];for(var k=[],u=[],f=[],v=0;5>v;v++)k.push(h.append("line").attr("stroke-width",2).attr("stroke",g(v)).style("stroke-linecap","round").style("opacity",1)),u.push(h.append("svg:circle").attr("stroke-width",2.5).attr("stroke",g(v)).attr("fill","none").attr("opacity",.3)),f.push(0===v?.5:0);var M=h.append("line").attr("x1",y(1)).attr("y1",d(0)).attr("x2",y(0)).attr("y2",d(0)).attr("stroke-width",2).attr("stroke","grey").style("stroke-linecap","round").style("stroke-dasharray","3, 3").style("opacity",1);h.append("line").attr("x1",y(2.5)).attr("y1",d(0)).attr("x2",630).attr("y2",d(0)).attr("stroke-width",1).attr("stroke","black").style("opacity",.5);var b=h.append("svg:path").attr("stroke-width",2).attr("stroke","grey").attr("fill","none").style("opacity",.75),m=h.append("svg:circle").attr("cx",y(0)).attr("cy",d(0)).attr("r",2).attr("stroke-width",2).attr("stroke","grey").attr("fill","grey").attr("opacity",1),P=0,w=d3.range(0,6*Math.PI+.05,.05),I=d3.scale.linear().range([y(0)+150,y(0)+450]);I.domain([0,6*Math.PI+.05]),h.append("line").attr("x1",I(2*Math.PI)).attr("y1",d(-.1)).attr("x2",I(2*Math.PI)).attr("y2",d(0)).attr("stroke-width",1).attr("stroke","grey"),h.append("text").attr("text-anchor","middle").attr("x",I(2*Math.PI)).attr("y",d(-.3)).attr("font-size",10).attr("fill","grey").text("0.25 s"),h.append("line").attr("x1",I(4*Math.PI)).attr("y1",d(-.1)).attr("x2",I(4*Math.PI)).attr("y2",d(0)).attr("stroke-width",1).attr("stroke","grey"),h.append("text").attr("text-anchor","middle").attr("x",I(4*Math.PI)).attr("y",d(-.3)).attr("font-size",10).attr("fill","grey").text("0.5 s"),h.append("svg:rect").attr("fill","grey").style("opacity",.1).attr("x",I(0)).attr("y",d(2.5)).attr("width",I(2*Math.PI)-I(0)).attr("height",d(-2.5)-d(2.5));var S=d3.svg.line().x(function(t){return I(t)}).y(function(t){return d(Math.sin(t)*f[0]+Math.sin(2*t)*f[1]+Math.sin(3*t)*f[2]+Math.sin(4*t)*f[3]+Math.sin(5*t)*f[4])});t(),d3.select("#phasorbuttons").insert("button").style("height",25).text("Sine").on("click",t),d3.select("#phasorbuttons").insert("button").style("height",25).text("Square").on("click",a),d3.select("#phasorbuttons").insert("button").style("height",25).text("Saw").on("click",r),d3.select("#phasorbuttons").insert("button").style("height",25).text("Wobble").on("click",e);var z=0,q=0,A=0,H=0;d3.timer(s,100)}();