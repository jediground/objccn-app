var SIG_CORRELATION_INTERACTIVE_TWO_SIGNALS=function(){function t(t){var r=t-o.length;return r>0&&r<o.length?o[r]:0}function r(){var t=o.length;i.append("svg:path").attr("stroke-width",2).attr("stroke",E).attr("fill","none").attr("opacity",.4).attr("d",_(d3.range(0,o.length,1)));for(var r=0;r<o.length;r++)i.append("svg:circle").attr("stroke","none").attr("fill",E).attr("cx",x(r+t)).attr("cy",v(o[r])).attr("r",2)}function a(){i.append("svg:path").attr("stroke-width",2).attr("stroke",T).attr("fill","none").attr("opacity",.4).attr("d",R(d3.range(0,d.length,1)));for(var t=0;t<d.length;t++)i.append("svg:circle").attr("stroke","none").attr("fill",T).attr("cx",x(t)).attr("cy",m(d[t])).attr("r",2)}function e(){for(var t=0;t<L.length;t++)L[t].attr("cx",x(t+S));C.attr("d",A(d3.range(0,o.length,1)))}function n(){SIMPLE_CORRELATION_OFFSET!=S&&(S=SIMPLE_CORRELATION_OFFSET,e(),document.getElementById("phaseShift").innerHTML="Lag: &nbsp; <b>"+(S-60).toFixed(0)+"</b>",z.data(d3.range(0,o.length,1)).attr("x1",function(t){return x(t+S)}).attr("y1",function(r){return v(t(r+S))}).attr("x2",function(t){return x(t+S)}).attr("y2",function(t){return k(o[t])}),F.attr("x1",x(S)).attr("y1",m(d[S])).attr("x2",x(S)).attr("y2",v(t(S))),M.attr("cx",x(S)).attr("cy",m(d[S])))}for(var i=d3.select("#sigCorrelationInteractiveTwoSines"),o=[],l=20,s=0;l>s;s++){var c=2*(s/l)*Math.PI;o.push(.5*(Math.sin(c)+Math.sin(2*c)))}o=o.concat(o).concat(o);for(var d=[],s=0;120>s;s++){for(var g=0,p=0;p<o.length;p++)g+=o[p]*t(p+s);d.push(g)}d.push(0);var h=550,f=250,u={top:0,right:0,bottom:0,left:0};plotWidth=h-u.left-u.right,plotHeight=f-u.top-u.bottom;var y=plotHeight/3,x=d3.scale.linear().range([u.left,plotWidth]),v=d3.scale.linear().range([y,u.top]),k=d3.scale.linear().range([2*y+20,y+20]),m=d3.scale.linear().range([3*y+40,2*y+40]);x.domain([0,3*o.length]),v.domain([-1,1]),k.domain([-1,1]),m.domain([-15,15]),i.append("svg:rect").attr("fill","grey").style("opacity",.1).attr("x",x(o.length)).attr("y",0).attr("width",x(o.length)/3).attr("height",280);var S=60,b=d3.svg.axis().scale(x).tickSize(0).ticks(0).tickSubdivide(!0),w=d3.svg.axis().scale(x).tickSize(0).ticks(0).tickSubdivide(!0),I=d3.svg.axis().scale(x).tickSize(0).ticks(0).tickSubdivide(!0);i.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+v(0)+")").style("opacity",.25).call(b),i.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+k(0)+")").style("opacity",.25).call(w),i.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+m(0)+")").style("opacity",.25).call(I);var E="steelblue",O="green",T="#8c564b",S=0,L=[],_=d3.svg.line().x(function(t){return x(t+o.length)}).y(function(t,r){return v(o[r])}),A=d3.svg.line().x(function(t){return x(t+S)}).y(function(t,r){return k(o[r])}),R=d3.svg.line().x(function(t,r){return x(r)}).y(function(t,r){return m(d[r])}),z=i.selectAll(".connectors").data(d3.range(0,o.length,1)).enter().append("line").attr("x1",function(t){return x(t+S)}).attr("y1",function(r){return v(t(r+S))}).attr("x2",function(t){return x(t+S)}).attr("y2",function(t){return k(o[t])}).attr("stroke-width",1).attr("stroke","grey").style("opacity",.2).style("stroke-dasharray","5, 2");r(),a();for(var s=0;s<o.length;s++)L.push(i.append("svg:circle").attr("stroke","none").attr("fill",O).attr("cx",x(s+S)).attr("cy",k(o[s])).attr("r",2));var C=i.append("svg:path").attr("stroke-width",2).attr("stroke",E).attr("fill","none").attr("opacity",.4).attr("d",A(d3.range(0,o.length,1))),F=i.append("line").attr("x1",x(S)).attr("y1",m(d[S])).attr("x2",x(S)).attr("y2",v(t(S))).attr("stroke-width",2).attr("stroke","grey").style("opacity",.5),M=i.append("svg:circle").attr("cx",x(S)).attr("cy",m(d[S])).attr("stroke","grey").attr("stroke-width",2).attr("fill","none").attr("r",4);i.append("text").attr("text-anchor","end").attr("x",x(180)).attr("y",v(0)+13).attr("stroke","none").attr("fill","#555").attr("font-weight","bold").attr("font-size",11).text("Original Waveform, x(n)"),i.append("svg:rect").attr("fill","white").style("opacity",1).attr("x",x(150)).attr("y",k(0)+2).attr("width",100).attr("height",15),i.append("text").attr("text-anchor","end").attr("x",x(180)).attr("y",k(0)+13).attr("stroke","none").attr("fill","#555").attr("font-weight","bold").attr("font-size",11).text("Lagged Waveform, x(k + t)"),i.append("text").attr("text-anchor","end").attr("x",x(180)).attr("y",265).attr("stroke","none").attr("fill","#555").attr("font-weight","bold").attr("font-size",11).text("Auto Correlation Function");var N=d3.scale.category10();N.domain[d3.range(0,10,1)],d3.timer(n,100)}();